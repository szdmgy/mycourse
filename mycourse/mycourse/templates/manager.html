{% extends "base.html" %}
{% block title %}管理员控制台 - 实验报告收集系统{% endblock %}
{% block nav_admin %}active{% endblock %}

{% block content %}
<h2 class="mb-3"><i class="bi bi-gear"></i> 管理员控制台</h2>

<div class="row g-3">
  <!-- 用户管理 -->
  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-header"><strong><i class="bi bi-people"></i> 用户管理</strong></div>
      <div class="card-body d-grid gap-2">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addMemberModal">
          <i class="bi bi-person-plus"></i> 添加教师/学生
        </button>
        <a href="{% url 'user_list' %}" class="btn btn-outline-primary">
          <i class="bi bi-list-ul"></i> 查看教师/学生列表
        </a>
      </div>
    </div>
  </div>

  <!-- 数据导入 -->
  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-header"><strong><i class="bi bi-upload"></i> 数据导入</strong></div>
      <div class="card-body d-grid gap-2">
        <a href="{% url 'import_data' %}" class="btn btn-primary">
          <i class="bi bi-file-earmark-excel"></i> 导入课程数据（推荐）
        </a>
        <a href="{% url 'file_upload' 'course' %}" class="btn btn-outline-primary">
          <i class="bi bi-cloud-upload"></i> 上传课程文件
        </a>
        <a href="{% url 'file_upload' 'student' %}" class="btn btn-outline-primary">
          <i class="bi bi-cloud-upload"></i> 上传学生文件
        </a>
        <a href="{% url 'file_upload' 'teacher' %}" class="btn btn-outline-primary">
          <i class="bi bi-cloud-upload"></i> 上传教师文件
        </a>
        <a href="{% url 'file_upload' 'task' %}" class="btn btn-outline-primary">
          <i class="bi bi-cloud-upload"></i> 上传作业文件
        </a>
      </div>
    </div>
  </div>

  <!-- 快捷入口 -->
  <div class="col-md-6">
    <div class="card h-100">
      <div class="card-header"><strong><i class="bi bi-link-45deg"></i> 快捷入口</strong></div>
      <div class="card-body d-grid gap-2">
        <a href="{% url 'teacherCourseList' %}" class="btn btn-outline-info">
          <i class="bi bi-book"></i> 课程管理（教师视角）
        </a>
        <a href="/admin/" class="btn btn-outline-secondary">
          <i class="bi bi-database"></i> Django Admin 后台
        </a>
      </div>
    </div>
  </div>
</div>

<!-- ════════ 模态框：添加成员 ════════ -->
<div class="modal fade" id="addMemberModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="bi bi-person-plus"></i> 添加成员</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form action="{% url 'addMemberByManager' %}" method="post">
        {% csrf_token %}
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">成员类型</label>
            <div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="memberType" value="student" id="typeStudent" checked>
                <label class="form-check-label" for="typeStudent">学生</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="memberType" value="teacher" id="typeTeacher">
                <label class="form-check-label" for="typeTeacher">教师</label>
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">姓名 <span class="text-danger">*</span></label>
            <input type="text" class="form-control" name="memberName" required>
          </div>
          <div class="mb-3">
            <label class="form-label">学号/工号 <span class="text-danger">*</span></label>
            <input type="text" class="form-control" name="memberNumber" required>
          </div>
          <div class="mb-3">
            <label class="form-label">性别</label>
            <div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="memberGender" value="male" id="genderM">
                <label class="form-check-label" for="genderM">男</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="memberGender" value="female" id="genderF" checked>
                <label class="form-check-label" for="genderF">女</label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="submit" class="btn btn-primary"><i class="bi bi-check-lg"></i> 添加</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
